<html>
  <head>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>

    <!-- Adicione o JavaScript e jQuery do Bootstrap -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <title>Cadastro de Credor</title>
    <style>
      /* ... estilos existentes ... */

      .credor-table-container {
        max-width: 800px;
        margin: 0 auto;
        float: left;
        background-color: transparent;
      }

      .credor-table {
        width: 100%;
        border-collapse: collapse;
      }

      .credor-table th,
      .credor-table td {
        border: 1px solid #dddddd;
      }

      .credor-table th {
        background-color: #0066a2;
        color: white;
        padding: 15px;
      }

      .credor-table td {
        padding: 15px;
        text-align: center;
        background-color: rgba(255, 255, 255, 0.7);
      }

      .credor-table td.checkbox-cell {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .credor-table textarea {
        width: 100%;
        height: 60px;
        resize: vertical;
      }

      .credor-table .button3d {
        background-color: #0066a2;
        color: white;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        transition-duration: 0.4s;
        cursor: pointer;
        border-radius: 5px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .credor-table .button3d:hover {
        background-color: #005388;
        color: white;
      }

      body {
        background-image: url("https://www.futurebrand.com/uploads/_heroImage/Webhelp-6.jpg");
        background-repeat: no-repeat;
        background-size: cover;
        background-attachment: fixed; /* Adicente esta linha */
}
        .ponto-title {
    font-family: Arial, sans-serif;
    color: #0066a2;
    text-align: center;
    padding: 20px 0;
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    margin: 0;
  }

  .hidden {
    display: none;
  }

  .credor-title {
    font-family: Arial, sans-serif;
    color: #0066a2;
    text-align: center;
    padding: 20px 0;
    background-color: #f2f2f2;
    border-top: 1px solid #0066a2;
    border-bottom: 1px solid #0066a2;
    margin: 0;
  }

  .credor-input {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
    border: 2px solid #0066a2;
    border-radius: 4px;
    font-family: Arial, sans-serif;
    font-size: 16px;
    outline: none;
    transition: border-color 0.3s ease-in-out;
  }

  .credor-input:focus {
    border-color: #005388;
  }

  .credor-table th {
    background-color: #0066a2;
    color: white;
    padding: 15px;
    text-align: center;
    font-weight: bold;
  }

  .credor-table td {
    text-align: center;
    vertical-align: middle;
    font-weight: bold;
    padding: 15px;
  }  
   </style>
  </head>
  <body>
    <div class="credor-table-container">
      <input
        class="button3d"
        type="button"
        value="Bater Ponto"
        onclick="baterPonto()"
      />
        <p id="relogio"></p>

  <form id="credorForm">
    <input
      class="credor-input"
      type="text"
      id="credor"
      placeholder="Credor"
    /><br />
    <input
      class="button3d"
      type="button"
      value="Cadastrar Credor"
      onclick="addCredor()"
    />
    <input
      class="button3d"
      type="button"
      value="Salvar dados"
      onclick="saveData()"
    />
  </form>

  <h4 class="hidden credor-title" id="credorTitle">Credores Cadastrados</h4>
  <div id="credorTable" class="hidden">
    <table class="credor-table">
      <!-- As linhas da tabela serão adicionadas aqui pelo JavaScript -->
    </table>
  </div>
</div>

<script>
  function iniciarRelogio() {
    const relogio = document.getElementById("relogio");
    setInterval(() => {
      const agora = new Date();
      relogio.innerText = agora.toLocaleTimeString();
      if (
        pontoBatido &&
        (agora.getTime() - tempoInicial.getTime()) / 1000 / 60 >= 2
      ) {
        pontoBatido = false;
        alert("2 minutos se passaram desde que o ponto foi batido");
        window.navigator.vibrate(200);
        let audio = new Audio(
          "https://github.com/FADUL37/fadul.github.io/blob/index/tribodaperiferia-tribo-da-perifereria-alma-de-pipa-a6a0a218.mp3"
);
audio.play(); // toca o som
}
}, 1000);
}
    // Função para lidar com o botão Bater Ponto
  function baterPonto() {
    pontoBatido = true;
    tempoInicial = new Date();
    alert("O ponto foi batido");
  }

  iniciarRelogio();

  let pontoBatido = false;
  let tempoInicial;

  function addCredor() {
    let credor = document.getElementById("credor").value;
    if (!credor) {
      return;
    }
    $.ajax({
      type: "POST",
      url: "save_credential.php",
      data: { credor: credor },
      success: function (response) {
        alert(response);
        document.getElementById("credor").value = "";
      },
      error: function (xhr, status, error) {
        alert("Erro ao cadastrar o credor");
        console.error(error);
      },
    });
  }

  function deleteRow(btn) {
    let row = btn.parentNode.parentNode;
    row.parentNode.removeChild(row);
    saveData();
  }

  function saveData() {
    let tableData = [];
    let table = document
      .getElementById("credorTable")
      .getElementsByTagName("table")[0];
    for (let i = 0; i < table.rows.length; i++) {
      // Correção aqui
      let rowData = [];
      let row = table.rows[i];
      for (let j = 0; j < row.cells.length; j++) {
        rowData.push(row.cells[j].innerHTML);
      }
      tableData.push(rowData);
    }
    localStorage.setItem("credorTableData", JSON.stringify(tableData));
  }

  function loadData() {
    let tableData = JSON.parse(localStorage.getItem("credorTableData"));
    if (tableData) {
      let table = document
        .getElementById("credorTable")
        .getElementsByTagName("table")[0];
      for (let i = 0; i < tableData.length; i++) {
        let rowData = tableData[i];
        let row = table.insertRow();
        for (let j = 0; j < rowData.length; j++) {
          row.insertCell().innerHTML = rowData[j];
        }
        row.insertCell().innerHTML =
          '<button class="button3d" onclick="deleteRow(this)">Excluir</button>';
      }
      document.getElementById("credorTable").classList.remove("hidden");
      document.getElementById("credorTitle").classList.remove("hidden");
    }
  }

  window.onload = loadData;

  loadData();
</script>
 </body>
</html>


    
